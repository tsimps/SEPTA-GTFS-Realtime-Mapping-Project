<head>
  <meta charset='utf-8' />
  <title>GTFS Learning Project</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- CSS Imports -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
  <link rel="stylesheet" href="css/style.css" />

</style>
</head>

<script>
var route = 34;
var changeRoute = function() {
  input = ($( "input[id=number-input1]").val());
  if (event.keyCode === 13) {
    route = input;
    map.removeLayer(markers);
    clearShape();
    main(route);
    mapShape(route);
  }

  //return same;

}
</script>

<body>
  <div class = "map" id='map'></div>

  <div class = "sidebar">
    <h1> SEPTA GTFS-Realtime Mapping</h1>
    <p> T. Andrew Simpson <br>
    <a href="https://www.tandrewsimpson.com">tandrewsimpson.com</a></>

    <p> Demonstration of visualizing SEPTA realtime bus locations. </p>

    <p> <label id="number-label1" for="number-input1">Route Search:</label> </p>
    <p><input id="number-input1" type="text" style = "height: 24px;
      width: 250px" type="number" placeholder="Enter Route then press 'enter'" enabled onkeyup="changeRoute()"> </p>
  </div>
</body>

<!-- Javascript Imports Here -->
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-omnivore/0.3.4/leaflet-omnivore.min.js"></script>
<script src="js/main.js"></script>

<script>

// set up map to begin
main(route);
mapShape(route);

function myMethod() {
  console.log("reloading");
  map.removeLayer(markers);
  clearShape();
  mapShape(route);
  main(route);
}

setInterval(myMethod(), 15000);

</script>
</html>
