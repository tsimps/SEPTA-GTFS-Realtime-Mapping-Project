<head>
  <meta charset='utf-8' />
  <title>GTFS Learning Project</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- CSS Imports -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
  <link rel="stylesheet" href="css/style.css" />

</style>
</head>

<script>
var route = 42;
var changeRoute = function() {
  input = ($( "input[id=number-input1]").val());
  //console.log('INPUT', input);


  //console.log('ROUTEID', routeID);

  if (event.keyCode === 13) {
    //console.log('enter');
    route = input;
    map.removeLayer(markers);
    main(route);
  }

  //return same;

}
</script>

<body>
  <div class = "map" id='map'></div>

  <div class = "sidebar">
    <h1> GTFS Learning Project</h1>
    <p> T. Andrew Simpson </p>

    <p> <label id="number-label1" for="number-input1">Route Search:</label> </p>
    <p><input id="number-input1" type="text" style = "height: 24px;
      width: 250px" type="number" placeholder="Enter Route then press 'enter'" value="42" enabled onkeyup="changeRoute()"> </p>
  </div>
</body>

<!-- Javascript Imports Here -->
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-omnivore/0.3.4/leaflet-omnivore.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyALK0Mz-HjDTfRJ99QvItWdXgJwbLWUuhY&callback=initMap"> </script>
<script src="js/main.js"></script>

<script>

// set up map to begin
main(route);
// creat an intervall counter (30000 = 30 secs)
setInterval(myMethod, 15000);

function myMethod() {
  console.log("reloading");
  map.removeLayer(markers);
  main(route);
}
//var kml = $.ajax('http://www3.septa.org/transitview/kml/'+route+'.kml');
//'http://www3.septa.org/transitview/kml/'+kmlName+'.kml?dts='+milli);
//var milliseconds = new Date().getTime();
omnivore.kml('http://www3.septa.org/transitview/kml/'+route+'.kml?dts='+milliseconds);
//omnivore.kml('js/42.kml').addTo(map);


//var src = 'http://www3.septa.org/transitview/kml/'+kmlName+'.kml?dts='+milli;

</script>
</html>
